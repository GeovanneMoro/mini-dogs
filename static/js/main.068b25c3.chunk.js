(this["webpackJsonp17-redux-desafio-3"]=this["webpackJsonp17-redux-desafio-3"]||[]).push([[0],{19:function(t,e,n){t.exports={button:"PasswordButton_button__1vsfO"}},22:function(t,e,n){t.exports={loading:"Loading_loading__1SIf8"}},23:function(t,e,n){t.exports={button:"PhotosLoadMore_button__3ioRG"}},36:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(0),o=n.n(r),c=n(12),i=n.n(c),s=n(2),u=n(4),l=n.n(u),d=n(6),b=n(3),f=n(11),j=n(5),h=function(t){var e=Object(j.b)({name:t.name,initialState:Object(f.a)({loading:!1,data:null,error:null},t.initialState),reducers:Object(f.a)({fetchStarted:function(t){t.loading=!0},fetchSucess:function(t,e){t.loading=!1,t.data=e.payload,t.error=null},fetchError:function(t,e){t.loading=!1,t.data=null,t.error=e.payload}},t.reducers)}),n=e.actions,a=n.fetchStarted,r=n.fetchSucess,o=n.fetchError;return Object(f.a)(Object(f.a)({},e),{},{asyncAction:function(e){return function(){var n=Object(d.a)(l.a.mark((function n(c){var i,s,u,d,b;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(a()),i=t.fetchConfig(e),s=i.url,u=i.options,n.next=5,fetch(s,u);case 5:return d=n.sent,n.next=8,d.json();case 8:return b=n.sent,n.abrupt("return",c(r(b)));case 12:return n.prev=12,n.t0=n.catch(0),n.abrupt("return",c(o(n.t0.message)));case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(t){return n.apply(this,arguments)}}()}})},p=function(t,e){try{return JSON.parse(window.localStorage.getItem(t))}catch(n){return e}},m=n(14),O=h({name:"photos",initialState:{list:[],pages:0,infinite:!0},reducers:{addPhotos:function(t,e){var n;(n=t.list).push.apply(n,Object(m.a)(e.payload)),t.pages++,0===e.payload.length&&(t.infinite=!1)},removePhotos:function(t){t.pages=0,t.infinite=!0,t.list=[],t.data=null}},fetchConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{url:"https://dogsapi.origamid.dev/json/api/photo/?_page=".concat(t,"&_total=3&_user=0"),options:{method:"GET",cache:"no-store"}}}}),g=O.asyncAction,v=O.actions,x=v.addPhotos,_=v.removePhotos,k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var e=Object(d.a)(l.a.mark((function e(n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(g(t));case 2:a=e.sent,r=a.payload,n(x(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=O.reducer,y=Object(j.b)({name:"button",initialState:!1,reducers:{abrir:function(){return!0},fechar:function(){return!1}}}),w=y.actions,N=w.abrir,C=w.fechar,P=y.reducer,E=h({name:"token",initialState:{data:{token:p("token",null)}},reducers:{removeToken:function(t){t.data=null},fetchSucess:{reducer:function(t,e){t.loading=!1,t.data=e.payload,t.error=null},prepare:function(t){return{payload:t,meta:{localStorage:{key:"token",value:t.token}}}}}},fetchConfig:function(t){return{url:"https://dogsapi.origamid.dev/json/jwt-auth/v1/token",options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}}}}),A=h({name:"user",reducers:{removeUser:function(t){t.data=null}},fetchConfig:function(t){return{url:"https://dogsapi.origamid.dev/json/api/user",options:{method:"GET",headers:{Authorization:"Bearer "+t}}}}}),F=Object(b.c)({token:E.reducer,user:A.reducer}),T=E.asyncAction,L=A.asyncAction,H=E.actions.removeToken,I=A.actions.removeUser,J=F,B=n(7),G=n.n(B),M=function(){var t=Object(s.c)((function(t){return t.login})),e=t.token,n=t.user,r=e.loading||n.loading,o=Object(s.b)();return Object(a.jsxs)("header",{className:G.a.header,children:[Object(a.jsx)("h1",{className:G.a.title,children:"Mini Dogs"}),Object(a.jsx)("button",{onClick:function(){return o((function(t){t(I()),t(H()),t(_()),t(C()),window.localStorage.removeItem("token")}))},"aria-label":"Logout",className:"\n        ".concat(G.a.login,"\n        ").concat(r?G.a.loading:"","\n        ").concat(n.data?G.a.loaded:"","\n        ")})]})},U=n(22),D=n.n(U),K=function(){return Object(a.jsx)("div",{className:D.a.loading})},z=n(20),R=n(8),Y=n.n(R),V=n(19),W=n.n(V),X=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t})).button;function n(){var n;t((n=e,function(t){t(n?C():N())}))}return e?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("div",{className:"dica anime",children:[Object(a.jsx)("p",{children:"Usu\xe1rio: dog"}),Object(a.jsx)("p",{children:"Senha: dog"})]}),Object(a.jsx)("button",{onClick:n,className:"".concat(W.a.button," anime"),children:"Fecha-te S\xe9samo"})]}):Object(a.jsx)("button",{onClick:n,className:"".concat(W.a.button," anime"),children:"Abre-te S\xe9samo"})},Z=function(){var t=Object(r.useState)(""),e=Object(z.a)(t,2),n=e[0],c=e[1],i=Object(r.useState)(""),u=Object(z.a)(i,2),b=u[0],f=u[1],j=Object(s.b)();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)("form",{className:"anime",onSubmit:function(t){var e;t.preventDefault(),j((e={username:n,password:b},function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(T(e));case 3:if(a=t.sent,void 0===(r=a.payload).token){t.next=8;break}return t.next=8,n(L(r.token));case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()))},children:[Object(a.jsx)("label",{className:Y.a.label,htmlFor:"username",children:"Usu\xe1rio"}),Object(a.jsx)("input",{className:Y.a.input,id:"username",type:"text",value:n,onChange:function(t){var e=t.target;return c(e.value)}}),Object(a.jsx)("label",{className:Y.a.label,htmlFor:"password",children:"Senhas"}),Object(a.jsx)("input",{className:Y.a.input,id:"password",type:"password",value:b,onChange:function(t){var e=t.target;return f(e.value)}}),Object(a.jsx)("button",{className:Y.a.button,children:"Enviar"})]}),Object(a.jsx)(X,{})]})},q=n(9),Q=n.n(q),$=function(){var t=Object(s.c)((function(t){return t.photos})).list;return Object(a.jsx)("ul",{className:Q.a.list,children:t.map((function(t){return Object(a.jsxs)("li",{className:"".concat(Q.a.item," anime"),children:[Object(a.jsx)("img",{src:t.src,alt:t.title,className:Q.a.imagem}),Object(a.jsx)("h2",{className:Q.a.titulo,children:t.title}),Object(a.jsx)("span",{className:Q.a.acessos,children:t.acessos})]},t.id)}))})},tt=n(23),et=n.n(tt),nt=function(){var t=Object(s.c)((function(t){return t.photos})),e=t.pages,n=t.infinite,r=t.loading,o=Object(s.b)();return r?Object(a.jsx)(K,{}):n?Object(a.jsx)("button",{onClick:function(){o(k(e+1))},className:et.a.button,children:"+"}):null},at=function(){var t=Object(s.b)();return o.a.useEffect((function(){t(k(1))}),[t]),Object(a.jsxs)("section",{children:[Object(a.jsx)($,{}),Object(a.jsx)(nt,{})]})},rt=function(){var t=Object(s.c)((function(t){return t.login})),e=t.user,n=t.token;return e.loading||n.loading?Object(a.jsx)(K,{}):e.data?Object(a.jsx)(at,{}):Object(a.jsx)(Z,{})};n(36);var ot=function(){var t=Object(s.b)();return o.a.useEffect((function(){t(function(){var t=Object(d.a)(l.a.mark((function t(e,n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n(),!(r=a.login.token.data.token)){t.next=5;break}return t.next=5,e(L(r));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}),[t]),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(M,{}),Object(a.jsx)(rt,{})]})},ct=function(t){return function(t){return function(e){var n=t(e),a=e.meta;if(a&&a.localStorage){var r=a.localStorage,o=r.key,c=r.value;window.localStorage.setItem(o,JSON.stringify(c))}return n}}},it=[].concat(Object(m.a)(Object(j.c)()),[ct]),st=Object(b.c)({login:J,photos:S,button:P}),ut=Object(j.a)({reducer:st,middleware:it});i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(s.a,{store:ut,children:Object(a.jsx)(ot,{})})}),document.getElementById("root"))},7:function(t,e,n){t.exports={header:"Header_header__2eWda",title:"Header_title__dYh9M",login:"Header_login__2R5pX",loading:"Header_loading__FPuvE",loaded:"Header_loaded__AZ-eF"}},8:function(t,e,n){t.exports={label:"Login_label__2gGES",input:"Login_input__2P7rD",button:"Login_button__2KxEA"}},9:function(t,e,n){t.exports={list:"PhotosContent_list__3yOYK",item:"PhotosContent_item__3T2kb",imagem:"PhotosContent_imagem__3w-8y",titulo:"PhotosContent_titulo__3KzBV",acessos:"PhotosContent_acessos__b6e0d"}}},[[37,1,2]]]);
//# sourceMappingURL=main.068b25c3.chunk.js.map